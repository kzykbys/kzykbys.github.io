	<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Change Dynamically Text and Color in iOS</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
		<link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/jquery.sidr.dark.css">
		<link href='http://fonts.googleapis.com/css?family=Gruppo' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Josefin+Sans' rel='stylesheet' type='text/css'>

	</head>
	
	<body>
    
        <div id="mobile-sticky-menu">
	<a   class="slide-menu" id="mobile-menu-button" href="#sidr">Menu</a>
	<img class="slide-menu" id="mobile-logo" src="/images/a.png" width="24" height="24" alt="" />
</div>

<div id="sidr">
	<!-- Your content -->
	<!-- <h4>Share</h4> -->

	<h4>Category</h4>
	<ul>
	   
		   <li>
		   		<a href="/categories/objective-c">objective-c</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/other">other</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/node-js">node.js</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/ruby-on-rails">ruby on rails</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/tips">tips</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/html5">html5</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/algorithms">algorithms</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/machine-learning">machine learning</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/c">c</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/ruby">ruby</a>
		   </li>
	   
    </ul>
	<h4>Archive</h4>
	<ul>
		
			<li>
				<a href="/2013/08/">2013/08</a>
			</li>
		
			<li>
				<a href="/2013/09/">2013/09</a>
			</li>
		
			<li>
				<a href="/2013/11/">2013/11</a>
			</li>
		
			<li>
				<a href="/2013/12/">2013/12</a>
			</li>
		
			<li>
				<a href="/2014/01/">2014/01</a>
			</li>
		
			<li>
				<a href="/2014/03/">2014/03</a>
			</li>
		
			<li>
				<a href="/2014/04/">2014/04</a>
			</li>
		
	</ul>

	<img src="/images/me.png" alt="me" />

</div>


        <div class="site">

			<!-- title -->
			<!-- Header -->
<header>
<h1><a href="http://localhost:4000/"><img src="/images/title.png" alt="logo" /></a></h1>
	<hr />
</header>

			<div id="contents">
				
				<div id="main">
					<h3><a href="">Change Dynamically Text and Color in iOS</a></h3>
					<p class="author">
						<span class="date">2013-09-23 02:11:00 -0700</span>
					</p>
		      		
					<div class="post">
						<p>I think we often encounter the situation we want to change the text color based on the length of the message in iOS programming. The famous example is twitter. When we type tweet and the tweet is over 140, the counter become red. like there : </p>

<p><img src="http://4.bp.blogspot.com/-pA1aMN-nje0/Uj-eApF_EzI/AAAAAAAAAJU/jsnVbwCPn5A/s1600/1.png" alt=""></p>

<p><img src="http://2.bp.blogspot.com/-me3klHRsxqo/Uj-eBkurg3I/AAAAAAAAAJc/Xh0S3itJxLc/s1600/2.png" alt=""></p>

<p>This twitter editing modal view automatically show the count and change the color based on the user typing.</p>

<h3 id="toc_0">How to implement</h3>

<p>This is easily accomplished. Here is simple code :</p>

<div class="highlight"><pre><code class="objective-c"><span class="lineno"> 1</span> <span class="cp">#import &quot;KKViewController.h&quot;</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="k">@interface</span> <span class="nc">KKViewController</span> <span class="p">()</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">UITextField</span> <span class="o">*</span><span class="n">textfield</span><span class="p">;</span>
<span class="lineno"> 6</span> <span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">UILabel</span>     <span class="o">*</span><span class="n">labelCount</span><span class="p">;</span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span> <span class="k">@end</span>
<span class="lineno"> 9</span> 
<span class="lineno">10</span> <span class="k">@implementation</span> <span class="nc">KKViewController</span>
<span class="lineno">11</span> 
<span class="lineno">12</span> <span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span>
<span class="lineno">13</span> <span class="p">{</span>
<span class="lineno">14</span>     <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
<span class="lineno">15</span>     
<span class="lineno">16</span>     <span class="c1">// Textfield</span>
<span class="lineno">17</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span>                 <span class="o">=</span> <span class="p">[[</span><span class="n">UITextField</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="lineno">18</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">frame</span>           <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
<span class="lineno">19</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">borderStyle</span>     <span class="o">=</span> <span class="n">UITextBorderStyleRoundedRect</span><span class="p">;</span>
<span class="lineno">20</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">placeholder</span>     <span class="o">=</span> <span class="s">@&quot;Type message for this people.&quot;</span><span class="p">;</span>
<span class="lineno">21</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">clearButtonMode</span> <span class="o">=</span> <span class="n">UITextFieldViewModeWhileEditing</span><span class="p">;</span>
<span class="lineno">22</span>     <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span> <span class="n">addTarget</span><span class="o">:</span><span class="n">self</span>
<span class="lineno">23</span>                        <span class="nl">action:</span><span class="k">@selector</span><span class="p">(</span><span class="n">textAttributesBasedOnTyping</span><span class="o">:</span><span class="p">)</span>
<span class="lineno">24</span>              <span class="nl">forControlEvents:</span><span class="n">UIControlEventEditingChanged</span><span class="p">];</span>
<span class="lineno">25</span>     
<span class="lineno">26</span>     <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="n">addSubview</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">];</span>
<span class="lineno">27</span>     
<span class="lineno">28</span>     <span class="c1">// Count Text</span>
<span class="lineno">29</span>     <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span>           <span class="o">=</span> <span class="p">[[</span><span class="n">UILabel</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="lineno">30</span>     <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">frame</span>     <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">140</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">);</span>
<span class="lineno">31</span>     <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">text</span>      <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="n">stringWithFormat</span><span class="o">:</span><span class="s">@&quot;%i&quot;</span><span class="p">,</span><span class="mi">140</span> <span class="o">-</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">text</span> <span class="n">length</span><span class="p">]];</span>
<span class="lineno">32</span>     <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">colorWithRed</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">green</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">blue</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">alpha</span><span class="o">:</span><span class="mf">0.8</span><span class="p">];</span>
<span class="lineno">33</span>     
<span class="lineno">34</span>     <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="n">addSubview</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">];</span>
<span class="lineno">35</span>     
<span class="lineno">36</span> <span class="p">}</span>
<span class="lineno">37</span> 
<span class="lineno">38</span> <span class="k">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">textAttributesBasedOnTyping:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span>
<span class="lineno">39</span> <span class="p">{</span>
<span class="lineno">40</span>     <span class="k">if</span><span class="p">([</span><span class="n">sender</span> <span class="n">isKindOfClass</span><span class="o">:</span><span class="p">[</span><span class="n">UITextField</span> <span class="n">class</span><span class="p">]])</span>
<span class="lineno">41</span>     <span class="p">{</span>
<span class="lineno">42</span>         <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">text</span>     <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="n">stringWithFormat</span><span class="o">:</span><span class="s">@&quot;%i&quot;</span><span class="p">,</span><span class="mi">140</span> <span class="o">-</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">text</span> <span class="n">length</span><span class="p">]];</span>
<span class="lineno">43</span>         
<span class="lineno">44</span>         <span class="c1">// Change color by the count of text length</span>
<span class="lineno">45</span>         <span class="k">if</span><span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">text</span> <span class="n">length</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">140</span><span class="p">)</span>
<span class="lineno">46</span>         <span class="p">{</span>
<span class="lineno">47</span>             <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">colorWithRed</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">green</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">blue</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">alpha</span><span class="o">:</span><span class="mf">0.8</span><span class="p">];</span> <span class="c1">// Gray</span>
<span class="lineno">48</span>         <span class="p">}</span>
<span class="lineno">49</span>         <span class="k">else</span>
<span class="lineno">50</span>         <span class="p">{</span>
<span class="lineno">51</span>             <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">colorWithRed</span><span class="o">:</span><span class="mi">1</span> <span class="n">green</span><span class="o">:</span><span class="mi">0</span> <span class="n">blue</span><span class="o">:</span><span class="mi">0</span> <span class="n">alpha</span><span class="o">:</span><span class="mf">0.8</span><span class="p">];</span>  <span class="c1">// Red</span>
<span class="lineno">52</span>         <span class="p">}</span>
<span class="lineno">53</span>     <span class="p">}</span>
<span class="lineno">54</span> <span class="p">}</span>
<span class="lineno">55</span> 
<span class="lineno">56</span> <span class="k">@end</span>
</code></pre></div>

<p>The point is adding Target ( - (void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents;) and using &quot;UIControlEventEditingChanged&quot; in my textAttributesBasedOnTyping function. By this code, we can change dynamically the text ( number in this case ) and the color at the same time. It is so convenient. Furthermore, we can add some more effect like the twitter&#39;s tweet button in above photos. If we type over 140 characters, we won&#39;t be allowed  to tweet it by disable the button. It is helpful to validate something in client side. </p>

<p>If you have better solution, feel free to tell me. </p>

					</div>

				</div>

				<div id="sub">
				   <h4>About</h4>
<p><u>Kazuya Kobayshi</u><br />
- I'm a once law student trying to be computer geek.<br />
- ギークになりたい。<br />
<a href="mailto:kzy.kbys@gmail.com?subject=From Blog : &amp;body=Kazuya Kobayashi (小林和也)">kzy.kbys@gmail.com</a></p>
<h4>Elsewhere</h4>
<p>
   <a href="https://www.facebook.com/kbys.kzy">Facebook</a><br />
   <a href="https://twitter.com/kzy_kbys">Twitter</a><br />
   <a href="https://github.com/kzykbys">Github</a></p>
<h4>Category</h4>
<p>|
   
	   <a href="/categories/objective-c">objective-c</a> | 
   
	   <a href="/categories/other">other</a> | 
   
	   <a href="/categories/node-js">node.js</a> | 
   
	   <a href="/categories/ruby-on-rails">ruby on rails</a> | 
   
	   <a href="/categories/tips">tips</a> | 
   
	   <a href="/categories/html5">html5</a> | 
   
	   <a href="/categories/algorithms">algorithms</a> | 
   
	   <a href="/categories/machine-learning">machine learning</a> | 
   
	   <a href="/categories/c">c</a> | 
   
	   <a href="/categories/ruby">ruby</a> | 
   
</p>
<h4>Archive</h4>
   <p>|
   
		<a href="/2013/08/">2013/08</a> | 
   
		<a href="/2013/09/">2013/09</a> | 
   
		<a href="/2013/11/">2013/11</a> | 
   
		<a href="/2013/12/">2013/12</a> | 
   
		<a href="/2014/01/">2014/01</a> | 
   
		<a href="/2014/03/">2014/03</a> | 
   
		<a href="/2014/04/">2014/04</a> | 
   
</p>
<h4>Work</h4>			   
<p>Coming soon... maybe.</p>
				</div>

			</div>


		</div>

				<div class="footer">
		   <div class="footer_inner">
			   <div class="contact">
				   <h4>About</h4>
				   <p><u>Kazuya Kobayshi</u><br />
				   - I'm a once law student trying to be computer geek.<br />
				   - ギークになりたい。<br />
				   <a href="mailto:kzy.kbys@gmail.com?subject=From Blog : &amp;body=Kazuya Kobayashi (小林和也)">kzy.kbys@gmail.com</a></p>
				   <h4>Social</h4>
				   <p>
					   <a href="https://www.facebook.com/kbys.kzy">Facebook</a><br />
					   <a href="https://twitter.com/kzy_kbys">Twitter</a><br />
					   <a href="https://github.com/kzykbys">Github</a></p>
				   <h4>Category</h4>
				   <p>|
					   
						   <a href="/categories/objective-c">objective-c</a> | 
					   
						   <a href="/categories/other">other</a> | 
					   
						   <a href="/categories/node-js">node.js</a> | 
					   
						   <a href="/categories/ruby-on-rails">ruby on rails</a> | 
					   
						   <a href="/categories/tips">tips</a> | 
					   
						   <a href="/categories/html5">html5</a> | 
					   
						   <a href="/categories/algorithms">algorithms</a> | 
					   
						   <a href="/categories/machine-learning">machine learning</a> | 
					   
						   <a href="/categories/c">c</a> | 
					   
						   <a href="/categories/ruby">ruby</a> | 
					   
				   </p>
				   <h4>Archive</h4>
					   <p>|
					   
	    					<a href="/2013/08/">2013/08</a> | 
	    			   
	    					<a href="/2013/09/">2013/09</a> | 
	    			   
	    					<a href="/2013/11/">2013/11</a> | 
	    			   
	    					<a href="/2013/12/">2013/12</a> | 
	    			   
	    					<a href="/2014/01/">2014/01</a> | 
	    			   
	    					<a href="/2014/03/">2014/03</a> | 
	    			   
	    					<a href="/2014/04/">2014/04</a> | 
	    			   
    			   </p>
				   <h4>Work</h4>			   
				   <p>Coming soon... maybe.</p>
			   </div>
		   </div>
	   	</div>

	   	<!-- jQuery -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>	  
	  	<!-- Sdir (slide menu for small screen) -->
<script>
/*! Sidr - v1.2.1 - 2013-11-06
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */
(function(e){var t=!1,i=!1,n={isUrl:function(e){var t=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)?!0:!1},loadContent:function(e,t){e.html(t)},addPrefix:function(e){var t=e.attr("id"),i=e.attr("class");"string"==typeof t&&""!==t&&e.attr("id",t.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof i&&""!==i&&"sidr-inner"!==i&&e.attr("class",i.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),e.removeAttr("style")},execute:function(n,s,a){"function"==typeof s?(a=s,s="sidr"):s||(s="sidr");var r,d,l,c=e("#"+s),u=e(c.data("body")),f=e("html"),p=c.outerWidth(!0),g=c.data("speed"),h=c.data("side"),m=c.data("displace"),v=c.data("onOpen"),y=c.data("onClose"),x="sidr"===s?"sidr-open":"sidr-open "+s+"-open";if("open"===n||"toggle"===n&&!c.is(":visible")){if(c.is(":visible")||t)return;if(i!==!1)return o.close(i,function(){o.open(s)}),void 0;t=!0,"left"===h?(r={left:p+"px"},d={left:"0px"}):(r={right:p+"px"},d={right:"0px"}),u.is("body")&&(l=f.scrollTop(),f.css("overflow-x","hidden").scrollTop(l)),m?u.addClass("sidr-animating").css({width:u.width(),position:"absolute"}).animate(r,g,function(){e(this).addClass(x)}):setTimeout(function(){e(this).addClass(x)},g),c.css("display","block").animate(d,g,function(){t=!1,i=s,"function"==typeof a&&a(s),u.removeClass("sidr-animating")}),v()}else{if(!c.is(":visible")||t)return;t=!0,"left"===h?(r={left:0},d={left:"-"+p+"px"}):(r={right:0},d={right:"-"+p+"px"}),u.is("body")&&(l=f.scrollTop(),f.removeAttr("style").scrollTop(l)),u.addClass("sidr-animating").animate(r,g).removeClass(x),c.animate(d,g,function(){c.removeAttr("style").hide(),u.removeAttr("style"),e("html").removeAttr("style"),t=!1,i=!1,"function"==typeof a&&a(s),u.removeClass("sidr-animating")}),y()}}},o={open:function(e,t){n.execute("open",e,t)},close:function(e,t){n.execute("close",e,t)},toggle:function(e,t){n.execute("toggle",e,t)},toogle:function(e,t){n.execute("toggle",e,t)}};e.sidr=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof t&&"string"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.sidr"),void 0):o.toggle.apply(this,arguments)},e.fn.sidr=function(t){var i=e.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body",displace:!0,onOpen:function(){},onClose:function(){}},t),s=i.name,a=e("#"+s);if(0===a.length&&(a=e("<div />").attr("id",s).appendTo(e("body"))),a.addClass("sidr").addClass(i.side).data({speed:i.speed,side:i.side,body:i.body,displace:i.displace,onOpen:i.onOpen,onClose:i.onClose}),"function"==typeof i.source){var r=i.source(s);n.loadContent(a,r)}else if("string"==typeof i.source&&n.isUrl(i.source))e.get(i.source,function(e){n.loadContent(a,e)});else if("string"==typeof i.source){var d="",l=i.source.split(",");if(e.each(l,function(t,i){d+='<div class="sidr-inner">'+e(i).html()+"</div>"}),i.renaming){var c=e("<div />").html(d);c.find("*").each(function(t,i){var o=e(i);n.addPrefix(o)}),d=c.html()}n.loadContent(a,d)}else null!==i.source&&e.error("Invalid Sidr Source");return this.each(function(){var t=e(this),i=t.data("sidr");i||(t.data("sidr",s),"ontouchstart"in document.documentElement?(t.bind("touchstart",function(e){e.originalEvent.touches[0],this.touched=e.timeStamp}),t.bind("touchend",function(e){var t=Math.abs(e.timeStamp-this.touched);200>t&&(e.preventDefault(),o.toggle(s))})):t.click(function(e){e.preventDefault(),o.toggle(s)}))})}})(jQuery);
</script>

<script>
	
  	$(document).ready(function() {
		$('#mobile-menu-button').sidr();	  
  	});

  	$('#mobile-menu-button').click(function(e){
  	});


  	$('html').click(function(e){
  		$.sidr('close', 'sidr');
  	});

</script>

	</body>
</html>