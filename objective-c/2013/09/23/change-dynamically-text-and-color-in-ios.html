	<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Change Dynamically Text and Color in iOS</title>        
        <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />        
        <meta name="HandheldFriendly" content="true" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0" />

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
		<link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/jquery.sidr.dark.css">
		<link href='http://fonts.googleapis.com/css?family=Gruppo' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Josefin+Sans' rel='stylesheet' type='text/css'>

        <!-- jQuery -->
<script src="/javascript/jquery-1.11.1.min.js"></script>
<!-- slide menu -->
<script src="/javascript/jquery.sidr.min.js"></script>
<!-- For FB like buttom -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=571082556301479&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

	</head>
	
	<body>
    
        <div id="mobile-sticky-menu">
	<a   class="slide-menu" id="mobile-menu-button" href="#sidr">Menu</a>
	<!-- <img class="slide-menu" id="mobile-logo" src="/images/a.png" width="24" height="24" alt="" /> -->
</div>

<div id="sidr">
	<!-- Your content -->
	<!-- <h4>Share</h4> -->

	<h4>Category</h4>
	<ul>
	   
		   <li>
		   		<a href="/categories/objective-c">objective-c</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/other">other</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/node-js">node.js</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/ruby-on-rails">ruby on rails</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/tips">tips</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/html5">html5</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/algorithms">algorithms</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/machine-learning">machine learning</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/c">c</a>
		   </li>
	   
		   <li>
		   		<a href="/categories/ruby">ruby</a>
		   </li>
	   
    </ul>
	<h4>Archive</h4>
	<ul>
		
			<li>
				<a href="/2013/08/">2013/08</a>
			</li>
		
			<li>
				<a href="/2013/09/">2013/09</a>
			</li>
		
			<li>
				<a href="/2013/11/">2013/11</a>
			</li>
		
			<li>
				<a href="/2013/12/">2013/12</a>
			</li>
		
			<li>
				<a href="/2014/01/">2014/01</a>
			</li>
		
			<li>
				<a href="/2014/03/">2014/03</a>
			</li>
		
			<li>
				<a href="/2014/04/">2014/04</a>
			</li>
		
			<li>
				<a href="/2014/05/">2014/05</a>
			</li>
		
	</ul>

</div>

        <div class="site">

			<!-- title -->
			<!-- Header -->
<header>
<h1><a href="http://blog.kazuya.co/"><img src="/images/title.png" alt="logo" /></a></h1>
	<hr />
</header>

			<div id="contents">
				
				<div id="main">
					<h3><a href="">Change Dynamically Text and Color in iOS</a></h3>
					<span class="author">
						<span class="date">2013-09-23 02:11:00 -0700</span>
					</span>

					<hr />
					<div id="social-buttom">
	<!-- Social Buttoms -->
	<ul>
		<li>
			<!-- Pocket -->
			<a data-pocket-label="pocket" data-pocket-count="vertical" class="pocket-btn" data-lang="en"></a>
			<script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
		</li>		
		<li>
			<!-- Vertical Twitter -->
			<a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-count="vertical" data-hashtags="TipEdge">Tweet</a>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
		</li>				
		<li>
			<!-- FB -->
			<div class="fb-like" data-href="http://blog.kazuya.co//objective-c/2013/09/23/change-dynamically-text-and-color-in-ios.html" data-layout="box_count" data-action="like" data-show-faces="false" data-share="false"></div>
		</li>				
		<li style="margine-left: 10px;!important">
			<!-- Hatena -->
			<a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-title="Change Dynamically Text and Color in iOS" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加" "><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
		</li>		
	</ul>
</div>

		      		<hr class="clear-list"/>

					<div class="post">
						<p>I think we often encounter the situation we want to change the text color based on the length of the message in iOS programming. The famous example is twitter. When we type tweet and the tweet is over 140, the counter become red. like there : </p>

<p><img src="http://4.bp.blogspot.com/-pA1aMN-nje0/Uj-eApF_EzI/AAAAAAAAAJU/jsnVbwCPn5A/s1600/1.png" alt=""></p>

<p><img src="http://2.bp.blogspot.com/-me3klHRsxqo/Uj-eBkurg3I/AAAAAAAAAJc/Xh0S3itJxLc/s1600/2.png" alt=""></p>

<p>This twitter editing modal view automatically show the count and change the color based on the user typing.</p>

<h3 id="toc_0">How to implement</h3>

<p>This is easily accomplished. Here is simple code :</p>

<div class="highlight"><pre><code class="objective-c"><span class="lineno"> 1</span> <span class="cp">#import &quot;KKViewController.h&quot;</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="k">@interface</span> <span class="nc">KKViewController</span> <span class="p">()</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">UITextField</span> <span class="o">*</span><span class="n">textfield</span><span class="p">;</span>
<span class="lineno"> 6</span> <span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">UILabel</span>     <span class="o">*</span><span class="n">labelCount</span><span class="p">;</span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span> <span class="k">@end</span>
<span class="lineno"> 9</span> 
<span class="lineno">10</span> <span class="k">@implementation</span> <span class="nc">KKViewController</span>
<span class="lineno">11</span> 
<span class="lineno">12</span> <span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span>
<span class="lineno">13</span> <span class="p">{</span>
<span class="lineno">14</span>     <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
<span class="lineno">15</span>     
<span class="lineno">16</span>     <span class="c1">// Textfield</span>
<span class="lineno">17</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span>                 <span class="o">=</span> <span class="p">[[</span><span class="n">UITextField</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="lineno">18</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">frame</span>           <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
<span class="lineno">19</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">borderStyle</span>     <span class="o">=</span> <span class="n">UITextBorderStyleRoundedRect</span><span class="p">;</span>
<span class="lineno">20</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">placeholder</span>     <span class="o">=</span> <span class="s">@&quot;Type message for this people.&quot;</span><span class="p">;</span>
<span class="lineno">21</span>     <span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">clearButtonMode</span> <span class="o">=</span> <span class="n">UITextFieldViewModeWhileEditing</span><span class="p">;</span>
<span class="lineno">22</span>     <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span> <span class="n">addTarget</span><span class="o">:</span><span class="n">self</span>
<span class="lineno">23</span>                        <span class="nl">action:</span><span class="k">@selector</span><span class="p">(</span><span class="n">textAttributesBasedOnTyping</span><span class="o">:</span><span class="p">)</span>
<span class="lineno">24</span>              <span class="nl">forControlEvents:</span><span class="n">UIControlEventEditingChanged</span><span class="p">];</span>
<span class="lineno">25</span>     
<span class="lineno">26</span>     <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="n">addSubview</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">];</span>
<span class="lineno">27</span>     
<span class="lineno">28</span>     <span class="c1">// Count Text</span>
<span class="lineno">29</span>     <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span>           <span class="o">=</span> <span class="p">[[</span><span class="n">UILabel</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="lineno">30</span>     <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">frame</span>     <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">140</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">);</span>
<span class="lineno">31</span>     <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">text</span>      <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="n">stringWithFormat</span><span class="o">:</span><span class="s">@&quot;%i&quot;</span><span class="p">,</span><span class="mi">140</span> <span class="o">-</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">text</span> <span class="n">length</span><span class="p">]];</span>
<span class="lineno">32</span>     <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">colorWithRed</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">green</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">blue</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">alpha</span><span class="o">:</span><span class="mf">0.8</span><span class="p">];</span>
<span class="lineno">33</span>     
<span class="lineno">34</span>     <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="n">addSubview</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">];</span>
<span class="lineno">35</span>     
<span class="lineno">36</span> <span class="p">}</span>
<span class="lineno">37</span> 
<span class="lineno">38</span> <span class="k">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">textAttributesBasedOnTyping:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span>
<span class="lineno">39</span> <span class="p">{</span>
<span class="lineno">40</span>     <span class="k">if</span><span class="p">([</span><span class="n">sender</span> <span class="n">isKindOfClass</span><span class="o">:</span><span class="p">[</span><span class="n">UITextField</span> <span class="n">class</span><span class="p">]])</span>
<span class="lineno">41</span>     <span class="p">{</span>
<span class="lineno">42</span>         <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">text</span>     <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="n">stringWithFormat</span><span class="o">:</span><span class="s">@&quot;%i&quot;</span><span class="p">,</span><span class="mi">140</span> <span class="o">-</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">text</span> <span class="n">length</span><span class="p">]];</span>
<span class="lineno">43</span>         
<span class="lineno">44</span>         <span class="c1">// Change color by the count of text length</span>
<span class="lineno">45</span>         <span class="k">if</span><span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">textfield</span><span class="p">.</span><span class="n">text</span> <span class="n">length</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">140</span><span class="p">)</span>
<span class="lineno">46</span>         <span class="p">{</span>
<span class="lineno">47</span>             <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">colorWithRed</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">green</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">blue</span><span class="o">:</span><span class="mf">0.4</span> <span class="n">alpha</span><span class="o">:</span><span class="mf">0.8</span><span class="p">];</span> <span class="c1">// Gray</span>
<span class="lineno">48</span>         <span class="p">}</span>
<span class="lineno">49</span>         <span class="k">else</span>
<span class="lineno">50</span>         <span class="p">{</span>
<span class="lineno">51</span>             <span class="n">self</span><span class="p">.</span><span class="n">labelCount</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">colorWithRed</span><span class="o">:</span><span class="mi">1</span> <span class="n">green</span><span class="o">:</span><span class="mi">0</span> <span class="n">blue</span><span class="o">:</span><span class="mi">0</span> <span class="n">alpha</span><span class="o">:</span><span class="mf">0.8</span><span class="p">];</span>  <span class="c1">// Red</span>
<span class="lineno">52</span>         <span class="p">}</span>
<span class="lineno">53</span>     <span class="p">}</span>
<span class="lineno">54</span> <span class="p">}</span>
<span class="lineno">55</span> 
<span class="lineno">56</span> <span class="k">@end</span>
</code></pre></div>

<p>The point is adding Target ( - (void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents;) and using &quot;UIControlEventEditingChanged&quot; in my textAttributesBasedOnTyping function. By this code, we can change dynamically the text ( number in this case ) and the color at the same time. It is so convenient. Furthermore, we can add some more effect like the twitter&#39;s tweet button in above photos. If we type over 140 characters, we won&#39;t be allowed  to tweet it by disable the button. It is helpful to validate something in client side. </p>

<p>If you have better solution, feel free to tell me. </p>

					</div>

				</div>

				<div id="sub">
				   <div class="side_box">
   <h3>About</h3>
      <p class="side_content">
         <i>Kazuya Kobayashi</i><br />
         - I'm a once law student trying to be computer geek.<br />
         - ギークになりたい。<br />
         <a href="mailto:kzy.kbys@gmail.com?subject=From Blog : &amp;body=Kazuya Kobayashi (小林和也)">kzy.kbys@gmail.com</a>
      </p>
</div>

<hr />

<h3>Elsewhere</h3>
   <p class="side_content">
      <a href="https://www.facebook.com/kbys.kzy">Facebook</a><br />
      <a href="https://twitter.com/kzy_kbys">Twitter</a><br />
      <a href="https://github.com/kzykbys">Github</a>
   </p>

<hr />

<h3>Category</h3>
   <p class="side_content">|
      
   	   <a href="/categories/objective-c">objective-c</a> | 
      
   	   <a href="/categories/other">other</a> | 
      
   	   <a href="/categories/node-js">node.js</a> | 
      
   	   <a href="/categories/ruby-on-rails">ruby on rails</a> | 
      
   	   <a href="/categories/tips">tips</a> | 
      
   	   <a href="/categories/html5">html5</a> | 
      
   	   <a href="/categories/algorithms">algorithms</a> | 
      
   	   <a href="/categories/machine-learning">machine learning</a> | 
      
   	   <a href="/categories/c">c</a> | 
      
   	   <a href="/categories/ruby">ruby</a> | 
      
   </p>

<hr />

<h3>Archive</h3>
   <p class="side_content">|
      
   		<a href="/2013/08/">2013/08</a> | 
      
   		<a href="/2013/09/">2013/09</a> | 
      
   		<a href="/2013/11/">2013/11</a> | 
      
   		<a href="/2013/12/">2013/12</a> | 
      
   		<a href="/2014/01/">2014/01</a> | 
      
   		<a href="/2014/03/">2014/03</a> | 
      
   		<a href="/2014/04/">2014/04</a> | 
      
   		<a href="/2014/05/">2014/05</a> | 
      
   </p>

<hr />

<h3>Work</h3>			   
   <p class="side_content">
      Coming soon... maybe.
   </p>

<hr />
				</div>

			</div>


		</div>

				<div class="footer">
		   <div class="footer_inner">
			   <div class="contact">
				   <h4>About</h4>
				   <p>Kazuya Kobayashi<br />
				   - I'm a once law student trying to be computer geek.<br />
				   - ギークになりたい。<br />
				   <a href="mailto:kzy.kbys@gmail.com?subject=From Blog : &amp;body=Kazuya Kobayashi (小林和也)">kzy.kbys@gmail.com</a></p>
				   <h4>Elsewhere</h4>
				   <p>
					   <a href="https://www.facebook.com/kbys.kzy">Facebook</a><br />
					   <a href="https://twitter.com/kzy_kbys">Twitter</a><br />
					   <a href="https://github.com/kzykbys">Github</a></p>
				   <h4>Category</h4>
				   <p>|
					   
						   <a href="/categories/objective-c">objective-c</a> | 
					   
						   <a href="/categories/other">other</a> | 
					   
						   <a href="/categories/node-js">node.js</a> | 
					   
						   <a href="/categories/ruby-on-rails">ruby on rails</a> | 
					   
						   <a href="/categories/tips">tips</a> | 
					   
						   <a href="/categories/html5">html5</a> | 
					   
						   <a href="/categories/algorithms">algorithms</a> | 
					   
						   <a href="/categories/machine-learning">machine learning</a> | 
					   
						   <a href="/categories/c">c</a> | 
					   
						   <a href="/categories/ruby">ruby</a> | 
					   
				   </p>
				   <h4>Archive</h4>
					   <p>|
					   
	    					<a href="/2013/08/">2013/08</a> | 
	    			   
	    					<a href="/2013/09/">2013/09</a> | 
	    			   
	    					<a href="/2013/11/">2013/11</a> | 
	    			   
	    					<a href="/2013/12/">2013/12</a> | 
	    			   
	    					<a href="/2014/01/">2014/01</a> | 
	    			   
	    					<a href="/2014/03/">2014/03</a> | 
	    			   
	    					<a href="/2014/04/">2014/04</a> | 
	    			   
	    					<a href="/2014/05/">2014/05</a> | 
	    			   
    			   </p>
				   <h4>Work</h4>			   
				   <p>Coming soon... maybe.</p>
			   </div>
		   </div>
	   	</div>

	   		  
	  	<!-- Sdir (slide menu for small screen) -->

<script>
	
  	$(document).ready(function() {
		$('#mobile-menu-button').sidr();	  
  	});

  	$('#mobile-menu-button').click(function(e){
  	});

  	$('html').click(function(e){
  		$.sidr('close', 'sidr');
  	});

</script>
	  	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28952627-6', 'kazuya.co');
  ga('send', 'pageview');

</script>

	</body>
</html>